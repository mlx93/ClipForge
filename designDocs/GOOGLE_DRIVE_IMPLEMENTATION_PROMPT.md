# Google Drive OAuth Integration - Implementation Prompt

## Instructions for Implementation Agent

You are tasked with implementing Google Drive upload functionality for SimpleCut v2.0.0, allowing users to authenticate with Google OAuth and upload exported MP4 videos directly to their Google Drive with shareable links. Follow the detailed implementation plan in `@GOOGLE_DRIVE_INTEGRATION_PLAN.md` which outlines a 7-phase approach (16-22 hours total). The implementation must be **fully additive** - create new files (`src/main/googleDrive.ts`, `src/renderer/store/googleDriveStore.ts`) and only modify the existing `CloudExport.tsx` component (currently mock-only). **CRITICAL CONSTRAINTS**: Do NOT modify any recording, import, or export logic - these systems are perfect and must remain untouched. All new IPC handlers should be added alongside existing ones, and the feature must be isolatable (can be disabled without breaking core functionality).

The implementation should follow the plan's architecture: OAuth flow in main process with BrowserWindow for user authentication, secure token storage using Electron's SafeStorage API (avoid keytar native dependencies initially), IPC handlers for communication between renderer and main process, Google Drive API integration for resumable file uploads with progress tracking, and UI updates to CloudExport.tsx to replace mock upload with real API calls. After successful upload, generate and display a shareable link that users can copy or open. Start with Phase 1-2 (OAuth setup and flow), then Phase 3 (IPC integration), Phase 4 (Drive API), Phase 5 (UI integration), and finally Phase 6-7 (error handling and testing). Ensure comprehensive error handling for network failures, OAuth cancellations, token refresh failures, and provide clear user feedback throughout the process. Test thoroughly to verify no regressions in existing import, recording, or export functionality.
